<p-toast></p-toast>
  <h2 class="title">Datos del cliente</h2>
  <div class="card-content" header="Datos del cliente">
    <div class="card">
      <div class="div-1">
        <div>
          <p>{{client?.name}}</p>
          <p>{{client?.documentType}} - {{client?.numberDocument}}</p>
        </div>
        <div>
          <p>{{client?.email}}</p>
          <p> Contacto: <span>{{client?.phone}}</span> </p>
        </div>
        <div>
          <p>{{client?.vehicleBrand}}</p>
          <p>{{client?.vehicle}}</p>
          <p>Placa: {{client?.plate | uppercase}}</p>
        </div>
       </div>
       <div class="div-2">
        <h4>Trabajos realizados {{this.countJobs}} </h4>
        <button class="p-button-warning btn" pButton (click)="showBasicDialog()" icon="pi pi-car" label="Nuevo trabajo"></button>
        <p-dialog header="Ingresa los datos del trabajo realizado" [(visible)]="displayBasic2" [baseZIndex]="10000">

           <form class="form-content" [formGroup]="myForm" (ngSubmit)="submit()">
         <div class=" p-fluid p-grid p-formgrid">

          <label>Tipo de trabajo realizado</label>
          <div class="p-field input">
            <select  class="inputSeletc" formControlName="typeJobs">
              <option value="Mantenimiento">Mantenimiento</option>
              <option value="Cambio de Filtro">Cambio de Filtro</option>
              <option value="Otros">Otros</option>
            </select>
            <div class="error" *ngIf="invalidField('typeJobs')" >
              <span  *ngIf="myForm.controls?.['typeJobs']?.errors?.['required']" > Campo Obligatorio </span>
            </div>
          </div>

          <div class="p-field input">
            <label>Fecha</label>
            <p-calendar formControlName="date"></p-calendar>
            <div class="error" *ngIf="invalidField('date')" >
              <span  *ngIf="myForm.controls?.['date']?.errors?.['required']" > Campo Obligatorio </span>
            </div>
          </div>

          <div class="p-field input">
          <label>Proximo mantenimiento</label>
            <p-calendar class="calendar"  formControlName="nextDate"></p-calendar>
            <div class="error" *ngIf="invalidField('nextDate')" >
              <span  *ngIf="myForm.controls?.['nextDate']?.errors?.['required']" > Campo Obligatorio </span>
            </div>
          </div>

          <label for="order">NÂº de orden</label>
          <div class="p-field input">
            <input maxlength="12" minlength="4" pInputText  id="order" type="text" formControlName="numberOrder">
            <div class="error" *ngIf="invalidField('numberOrder')" >
              <span  *ngIf="myForm.controls?.['numberOrder']?.errors?.['required']" > Campo Obligatorio </span>
              <span  *ngIf="myForm.controls?.['numberOrder']?.errors?.['pattern']"> Solo se permiten numeros </span>
              <span  *ngIf="myForm.controls?.['numberOrder']?.errors?.['minlength']"> Minimo 4 caracteres </span>
              <span  *ngIf="myForm.controls?.['numberOrder']?.errors?.['maxlength']"> Maximo 11 caracteres </span>
            </div>
          </div>
          <label for="price">Valor</label>
          <div class="p-field input">
            <input maxlength="12" minlength="4" pInputText id="price" type="text" formControlName="price">
            <div class="error" *ngIf="invalidField('price')" >
              <span  *ngIf="myForm.controls?.['price']?.errors?.['required']" > Campo Obligatorio </span>
              <span  *ngIf="myForm.controls?.['price']?.errors?.['pattern']"> Solo se permiten numeros </span>
              <span  *ngIf="myForm.controls?.['price']?.errors?.['minlength']"> Minimo 4 caracteres </span>
              <span  *ngIf="myForm.controls?.['price']?.errors?.['maxlength']"> Maximo 11 caracteres </span>
            </div>
          </div>
        </div>
        <div>
          <label for="description">Describa el trabajo realizado</label>
          <div class="input">
            <textarea formControlName="description" rows="5" cols="61" pInputTextarea></textarea>
            <div class="error" *ngIf="invalidField('description')" >
              <span  *ngIf="myForm.controls?.['description']?.errors?.['required']" > Campo Obligatorio </span>
            </div>
          </div>
        </div>
      </form>

      <ng-template pTemplate="footer">
          <p-button (click)="submit()" icon="pi pi-check" (click)="displayBasic2=false" label="Guardar" class="p-button-text"></p-button>
          <p-button (click)="cancel()" icon="pi pi-times" (click)="displayBasic2=false" label="Cancelar"></p-button>
      </ng-template>
  </p-dialog>

</div>
<p-accordion>
  <p-accordionTab *ngFor="let item of jobs"  header="{{item?.date | date: 'longDate'}} - {{item.typeJobs}}" >
    <div>
      <h3>Orden:</h3>
      <span>{{item.numberOrder}}</span>
    </div>
    <div>
      <h3>Precio:</h3>
      <span>$ {{item.price | currency: 'COP': 'symbol'}}</span>
    </div>
    <div>
      <h3>Trabajo realizado:</h3>
      <span>{{item.description}}</span>
    </div>
  </p-accordionTab>
</p-accordion>
<ng-template  #notJobs>
  <h5 class="alert">Este cliente aun no tiene trabajos</h5>
</ng-template>
</div>

</div>
